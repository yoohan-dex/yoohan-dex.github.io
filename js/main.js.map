{"version":3,"sources":["main.js"],"names":["exports","default","upload","qrcodeUrl","haveSend","module","_interopRequireDefault","obj","__esModule","_config","require","_config2","loginInfo","countInit","_axios2","_axios","window","courl","gameover","action_name","openid","timeStamp","sign","aflag","hasAccepted","res","data","code","exec","Object","url","cb","check","setTimeout","then","serializeJSON","headers","keys","map","keyName","encodeURIComponent","join","$","document","getElementById","ele","display","post","assign","disappear","Content-Type","sendPage","nextPage","messagePage","c","btnSend","btnAcc","flowerAcc","heartsL","heartL","btnUpload","card200Page","hotwindPage","addClass","eggRollPage","className","dataLinePage","usbFanPage","playerCoinPage","endPage","ipadPage","miPowerPage","enterPage","flowerSend","beautyPage","btnRule","btnSendEvent","selfilePage","console","log","backgroundImage","flowerRemain","addEventListener","removeEventListener","btnGame","rulePanel","gamePage","truename","btype","checkPrice","qrcodeItem","s","price","style","msg","alert","_res$data","displayPrice","type","btnBack","tel","btnAccEvent"],"mappings":"qeACAA,EAAAC,sUADAC,OAAAC,0DAAAC,GAAAA,SAAAA,EAAAC,EAAAL,GAGA,YADA,SAAAM,GAAAC,GAAA,MAAAA,IAAAA,EAAAC,WAAAD,GAAAN,QAAAM,GAGC,GAFDE,GAEOC,EAAA,YAGNC,EAAAL,EAAAG,GAECG,EAAAA,EAAmBC,SARrBC,EAAAR,EAAAS,GACAZ,MAAA,GACEA,MAAAA,GAEAA,MAAAA,EAGFA,GADCS,OAAAA,MACDI,OAAAC,MAEOD,qIAGLJ,EADAM,OAAAA,UACAF,OAAAH,WAKAM,YAAA,QAAAC,OAAA,mCAAAC,UAAA,aAAAC,KAAA,8CAEDN,OAFCO,OAGEP,OAAOO,KAJT,IAAAC,GAAA,SAAAC,GAAA,MAAA,KAAAA,EAAAC,KAAAC,MAOAC,EACDC,SAAAC,GAcK,MAAA,UAXAN,GAHL,MAGD,UAJEO,GAAAb,MAAAA,UAAAA,KAKWc,IAAOC,WAAA,WAAA,MAAAH,GAAQJ,GAAAQ,GAAAV,IAAR,SACTW,EACPJ,SAAAA,GACDK,MAAAA,QAFDC,KAAAX,GAAAY,IAAA,SAAAC,GAGEN,MAAAA,oBAAWM,GAAA,IAAAC,mBAAAd,EAAAa,MAHbE,KAAA,MAAAT,EAAA,SAAAF,sBAKDY,MAN2B,UAAAX,GAAA,MAAAY,GAAAC,GAAAA,GAAAA,KAAAC,GAAAX,KAAAN,EAAAE,GAAAJ,GAAAK,OAAfe,EAAAA,SAAAA,GAAA,MAAAD,UAAAC,GAAO,MAAAhC,GAAAb,QAAA8C,KAAApC,EAAAV,QAAA6B,GAAAK,EAAAN,OAAAmB,UAAAtB,EAAAd,KAApBqC,SAAAC,eAAAJ,yCAOAK,EAAAA,SAAAN,GA2BA,MAAMO,UAAaR,eAAnBC,IAnBcQ,EAAAA,SAAAR,EAAAS,8BAAOC,EAAAb,SAAQG,GAAR,MAAPW,GAAAd,MAAAI,QAAO,SA2BfW,EAAYf,SAAlBG,GAxBA,MAAME,GAAAA,MAAAA,QAAAA,QAEFX,EAASM,EAAA,SAAAgB,GACPhB,EAAA,UADOA,EAAA,WAFOiB,EAAAjB,EAAA,WAAPkB,EAAAlB,mBAkCbW,EAAAX,EAAA,WA3BUmB,EAAAA,EAAgBjB,eAA1BkB,EAAAA,EAAAA,YACMC,EAAAA,EAAAA,WAAWC,EAAAA,EAAgBC,iCAC3BnB,EAAUJ,EAAA,iBAAAwB,EAAAA,EAAAA,cAAhBC,EAAAA,EAAAA,cACMlB,EAAAA,EAAAA,QAAYmB,EAAAA,EAAAA,8BAqCZC,EAAAA,EAAU3B,WAnChBkB,EAAAlB,EAAA,UAGA4B,EAAA5B,EAAA,QACAmB,EAAAnB,EAAA,0BAEA6B,EAAA7B,EAAA,WAqCEO,EAAUuB,EAAV,WAlCIjB,EAAAA,EAAAA,WACAC,EAAWd,EAAA,YACX+B,EAAAA,EAAAA,UAHNC,EAAAhC,EAAA,4BAOAI,EAAM6B,EAAAA,UA0CN1B,GAAM2B,GAnCNb,EAAAA,kBAAA,WACAR,EAAMe,GACNP,EAAMF,EAAAA,QACAC,GAAAA,IAuCFC,EAAAA,iBAAkB,QAAlB,WAnCEc,EAAAA,GACNC,QANAC,IAAA,WAOAhC,EAAMoB,MAANa,gBAAA,2DAAA7E,EAAA,KACA6B,EAAM0C,iBACAN,WAqCAL,MAAAA,GAASkB,MAlCf,IAJAL,GAAArB,EAAA2B,iBAAA,QAAA,WAKEnB,EAAAR,EAAA,cAoBFA,EAAA4B,oBAAA,QAAAP,oBAjBEQ,EAAAF,GAAApC,EAAAA,GAAAiB,EAAAU,EAAA,WAqCFE,EAAQO,EAAAA,SAnCRpC,EAAAuC,EAAA,SAEErD,GAAAA,gBAAAA,KAAAA,GACEc,EAAAA,iBAAAA,WAgCJiB,EAAAkB,EAAA,YA9BI7E,WAAAA,WAHF6C,MAAAoC,GAAAC,IAyCArC,SA/BAjB,GAAAA,iBAAM,QAAA,WAAiBuD,MAAAA,GAAMzC,KAJ/B0C,EAAAA,iBAAA,QAAA,WAIQ1C,EAER2C,GAHEC,EAAAA,QAMAnC,EAAAA,KAAQ4B,EACFQ,iBAAAA,QADER,WAAAA,EAAAA,GAAAA,EAAAA,QAENrC,EAAAA,KAEAiB,EAAAA,iBAAAA,QAAAA,WACAA,EAAAA,WACAA,SAAAA,EAAAA,QAAAA,MALF6B,IAAAA,EAAAC,SAAAb,MACElC,MAMG1C,EAAL,EAAqB8B,IACrBF,KAAM8D,IAGSC,IAAAA,GAAA,SAAAtE,GAAA,GAAAuE,GAAAvE,EAAAC,KAZf6B,EAAAA,EAAAA,KAcA0C,EAAAA,EAAAC,KAhBFJ,EAAAI,EAAAJ,GAmBAV,IAAQF,IAARE,EAAQF,CAA0Ba,MAAAD,GAAlChD,EAAAe,EACAc,IAAAA,GAAAA,EAAAA,YACE7B,GAAAA,GACAA,MAAAA,MAAAA,gBAAAA,2DAAAA,EAAAA,KAAAA,UAAAA,SACUsC,KAAVnC,GACAA,MAAAA,GAJFH,EAAAA,KAMAqD,IAAAA,GACElD,MAAAA,IAGAH,EAAAA,SAAAA,GAJFA,OAAAA,GAMAc,IAAAA,GACEb,EAAK2B,EACHa,KAAAA,GACAa,EAAOhC,EACPoB,KAAAA,GACCtD,EAAKuD,EArCV,KAAA,GAgBE3C,EAAAyB,UAwBuBzB,EAAAkB,UACVkC,EAAAA,EADU,KACJJ,GA6CjB/B,EAASP,EA5CXO,KAAAA,GACEgC,EAAAA,EACAE,KAAAA,GACAhE,EAAAA,EACAa,KAAAA,IACA8C,EAFAxB,EAHF,SAOE2B,EAAAA,KAMJM,EAAA7C,EAAA0B,iBAAA,QAAA,WACE9E,IACE2D,EAAAP,EAAA,aACEV,EAAAA,EAAAA,cACFC,EAAA,kBAAAb,KAAA,WACEY,EAAAA,oBAAAA,QAAAA,GACFb,WAAA,WACEa,EAAAA","file":"main.js","sourcesContent":["import config from \"./config\";\nimport axios from \"axios\";\nlet qrcodeUrl, loginInfo, gameover, haveSend;\nif (window.courl) {\n  qrcodeUrl = window.courl;\n} else {\n  qrcodeUrl =\n    \"http://tycm.dgxtx.com/vo/code.php?url=http://tycm.dgxtx.com/vo/share.php?str=b3Z2T053UFRzV3hkNUZmbGkyTDlaQ0pGdENEbw==&t=1498621990\"; //二维码链接\n}\nif (window.countInit) {\n  loginInfo = window.countInit;\n} else {\n  // a\n  // loginInfo = {\n  //   action_name: \"index\",\n  //   openid: \"ovvONwPTsWxd5Ffli2L9ZCJFtCDo\",\n  //   timeStamp: 1498621990,\n  //   sign: \"36af6280d2a300e867286d25529db83b9db26035\"\n  // };\n  // b\n  loginInfo = {\"action_name\":\"index\",\"openid\":\"ovvONwPTsWxd5Ffli2L9ZCJFtCDo1234\",\"timeStamp\":\"1498621990\",\"sign\":\"000b381f06c1b8df825769aefb928518bc8846a6\"};\n}\nif (window.aflag) {\n  gameover = !window.aflag;\n} else {\n  gameover = false;\n}\n// utils\n\nconst hasAccepted = res => res.data.code === 1;\nconst exec = url => data => cb => res => {\n  if (res) {\n    cb();\n  } else {\n    setTimeout(() => check(url)(data)(cb), 1000);\n  }\n};\nconst serializeJSON = data =>\n  Object.keys(data)\n    .map(\n      keyName =>\n        `${encodeURIComponent(keyName)}=${encodeURIComponent(data[keyName])}`\n    )\n    .join(\"&\");\n\nconst check = url => data => cb =>\n  post(url)(data).then(hasAccepted).then(exec(url)(data)(cb));\n\nconst post = url => data =>\n  axios.post(config[url], serializeJSON(Object.assign({}, data, loginInfo)), {\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    }\n  });\n\nconst $ = ele => document.getElementById(ele);\nconst addClass = (ele, c) => ele.className += \" \" + c;\nconst display = ele => ele.style.display = \"block\";\nconst disappear = ele => ele.style.display = \"none\";\n\nconst enterPage = $(\"enter\");\nconst acceptPage = $(\"accept\");\nconst qrcodePage = $(\"qrcode\");\nconst sendPage = $(\"send\");\nconst nextPage = $(\"next\");\nconst gamePage = $(\"game\");\nconst messagePage = $(\"message\");\n\nconst qrcodeItem = $(\"qrcode-item\");\nconst btnSend = $(\"btn-send\");\nconst btnAcc = $(\"btn-acc\");\nconst flowerSend = $(\"flower-send\");\nconst flowerAcc = $(\"flower-acc\");\nconst flowerRemain = $(\"flower-remain\");\nconst btnGame = $(\"btn-game-1\");\nconst btnRule = $(\"btn-game-2\");\nconst btnBack = $(\"back\");\nconst rulePanel = $(\"rule-panel\");\nconst heartsL = $(\"hearts-l\");\nconst heartL = $(\"heart-l\");\nconst btnUpload = $(\"upload\");\n\n// price\nconst ipadPage = $(\"ipad\");\nconst card200Page = $('card200');\nconst hotwindPage = $('hotwind');\nconst miPowerPage = $('miPower');\nconst eggRollPage = $('eggRoll');\n\nconst selfilePage = $('selfile');\nconst dataLinePage = $('dataLine');\nconst usbFanPage = $('usbFan');\nconst beautyPage = $('beauty');\nconst playerCoinPage = $('playerCoin');\n\nconst endPage = $('gameend');\n// index\n  // disappear(acceptPage);\n  // if (gameover) {\n  //   alert('你的抽奖次数已经用完');\n  // } \n\n// share\n  disappear(enterPage);\n  check('checkSending')()(() => {\n    display(flowerAcc)\n    addClass(btnAcc, 'down');\n    haveSend = true;\n  })\n\nenterPage.addEventListener(\"click\", () => {\n  display(qrcodePage);\n  console.log(\"display\");\n  qrcodeItem.style.backgroundImage = `linear-gradient(to right, #D43A50 0%,#D43A50 100%),url('${qrcodeUrl}')`;\n  check(\"checkQrcode\")()(() => display(sendPage));\n});\n// nextPage.addEventListener(\"click\", () => display(sendPage));\nconst btnSendEvent = btnSend.addEventListener(\"click\", () => {\n  addClass(btnSend, \"btn-send-g\");\n  btnSend.removeEventListener('click', btnSendEvent);\n  const s = () => {\n    display(heartsL);\n    display(heartL);\n    addClass(flowerSend, \"sending\");\n    addClass(heartsL, \"scale\");\n    addClass(heartL, \"scale\");\n  };\n  post(\"sendFlower\")().then(s);\n  check(\"checkAccept\")()(\n    () => {\n      addClass(flowerRemain, \"sending3\");  \n      setTimeout(() => display(gamePage), 3700);\n  });\n  // check(\"checkAccept\")()(t);\n});\n\nbtnGame.addEventListener(\"click\", () => display(messagePage));\nbtnRule.addEventListener(\"click\", () => {\n  display(rulePanel);\n  display(btnBack);\n  disappear(btnGame);\n  disappear(btnRule);\n});\nbtnBack.addEventListener(\"click\", () => {\n  disappear(rulePanel);\n  disappear(btnBack);\n  display(btnGame);\n  display(btnRule);\n});\nbtnUpload.addEventListener(\"click\", () => {\n  post('upload')({\n    truename: $('name').value,\n    tel: $('phone').value,\n    btype: haveSend ? 2 : 1,\n  }).then(checkPrice);\n});\n\nconst checkPrice = res =>{\n  const {code, type, msg} = res.data;\n  if (code === 1) {\n    alert(msg);\n    displayPrice(type);\n    const priceCode = $('priceCode');\n    display(priceCode);\n    price.style.backgroundImage = `linear-gradient(to right, #D43A50 0%,#D43A50 100%),url('${res.data.priceCode}')`;\n  } else if (code === 0) {\n    alert(msg);\n    display(endPage);\n  } else if (code === -1) {\n    alert(msg);\n  }\n}\nconst displayPrice = type => {\n  switch (type) {\n    case 1:\n      display(ipadPage);\n    case 2:\n      display(card200Page);\n    case 3:\n      display(hotwindPage);\n    case 4:\n      display(miPowerPage);\n    case 5:\n      display(eggRollPage);\n    case 6:\n      display(selfilePage);\n    case 7:\n      display(dataLinePage);\n    case 8:\n      display(usbFanPage);\n    case 9:\n      display(beautyPage);\n    case 10:\n      display(playerCoinPage);\n    default:\n      display(endPage);\n  }\n}\n\n// -------user B-----------\n\nconst btnAccEvent = btnAcc.addEventListener(\"click\", () => {\n  if (haveSend) {\n    addClass(btnAcc, \"btn-acc-g\");\n    addClass(flowerAcc, 'accepting2');\n    post('acceptFlower')().then(() => {\n      btnAcc.removeEventListener('click', btnAccEvent);\n      setTimeout(() => {\n        display(gamePage);\n      }, 3700);\n    })\n  }\n});\n\n// axios({\n//   method: 'post',\n//   url: config[url],\n//   data: Object.assign({}, data, loginInfo),\n//   headers: {\n//     'Content-Type' : 'application/x-www-form-urlencoded',\n//   }\n// })\n// .then(hasAccepted)\n// .then(exec(url)(data)(cb))\n// .catch(res => alert(res))\n"]}